import{u as b,r as d,j as r}from"./index.5d213138.js";import{c as f,a as o,b as u,u as g,T as m,C as _,o as h}from"./object.3d02c563.js";import{g as y}from"./UserService.a365a797.js";import{S as x}from"./react-select.esm.03175673.js";import{c as S}from"./DeviceService.79692ac6.js";import"./Icon.964e41b2.js";import"./Api.c0f7dd46.js";var i="C:\\Users\\asus\\Desktop\\TrackMe\\trackme-front-v0\\src\\pages\\device\\AddDevice.jsx";const q={name:"",device_type_id:"",ident:"",phone:"",settings_polling:"once",messages_ttl:1,messages_rotate:0,user:""},D=f({name:o().required("Name is required"),device_type_id:u().required("Device type id is required"),ident:o().required("Ident is required"),phone:o().required("settings_polling is required"),settings_polling:o(),messages_ttl:u(),messages_rotate:u(),user:o().required("User is required")}),M=()=>{b();const[a,v]=d.exports.useState([]),{control:N,register:l,formState:{errors:s},handleSubmit:p}=g({defaultValues:q,resolver:h(D)});d.exports.useEffect(()=>{y().then(e=>{v(e)}).catch(e=>{console.error(e)})},[]);const c=a==null?void 0:a.map(e=>({value:e._id,label:e.name}));return r("div",{children:r("form",{onSubmit:p(async e=>{const t=[{name:e.name,device_type_id:e.device_type_id,configuration:{ident:e.ident,phone:e.phone,settings_polling:e.settings_polling},messages_ttl:e.messages_ttl,messages_rotate:e.messages_rotate,user:e.user}];S(t).then(n=>console.log(n)).catch(n=>console.error(n.message))}),className:"space-y-4",children:[r(m,{name:"name",label:"Nom",type:"text",register:l,error:s.name,msgTooltip:!0},void 0,!1,{fileName:i,lineNumber:82,columnNumber:9},void 0),r(m,{name:"device_type_id",label:"Device Type ID",type:"number",register:l,error:s.device_type_id,msgTooltip:!0},void 0,!1,{fileName:i,lineNumber:90,columnNumber:9},void 0),r(m,{name:"ident",label:"IMEI",type:"text",register:l,error:s.ident,msgTooltip:!0},void 0,!1,{fileName:i,lineNumber:98,columnNumber:9},void 0),r(m,{name:"phone",label:"Telephone",type:"text",register:l,error:s.phone,msgTooltip:!0},void 0,!1,{fileName:i,lineNumber:106,columnNumber:9},void 0),r("div",{className:"mb-1",children:[r("label",{htmlFor:"user",className:"form-label",children:"User"},void 0,!1,{fileName:i,lineNumber:115,columnNumber:11},void 0),r(_,{control:N,name:"user",render:({field:e})=>r(x,{...e,className:"react-select",classNamePrefix:"select",options:c,value:c.find(t=>t.value===e.value),onChange:t=>e.onChange(t.value),id:"user"},void 0,!1,{fileName:i,lineNumber:122,columnNumber:15},void 0)},void 0,!1,{fileName:i,lineNumber:118,columnNumber:11},void 0),s.user&&r("span",{children:s.user.message},void 0,!1,{fileName:i,lineNumber:137,columnNumber:27},void 0)]},void 0,!0,{fileName:i,lineNumber:114,columnNumber:9},void 0),r("div",{className:"ltr:text-right rtl:text-left",children:r("button",{className:"btn btn-dark text-center",type:"submit",children:"Submit"},void 0,!1,{fileName:i,lineNumber:141,columnNumber:11},void 0)},void 0,!1,{fileName:i,lineNumber:140,columnNumber:9},void 0)]},void 0,!0,{fileName:i,lineNumber:81,columnNumber:7},void 0)},void 0,!1,{fileName:i,lineNumber:80,columnNumber:5},void 0)};export{M as default};
